

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Transport Examples &mdash; SPROCLIB - The TensorFlow/Keras for Chemical Engineering</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../_static/semantic_examples.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Pipeline Flow Examples" href="pipeline_flow_examples.html" />
    <link rel="prev" title="Complete Process Examples" href="complete_process_examples.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="../../index.html" class="icon icon-home">
            SPROCLIB - Semantic Process Control Library
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../quickstart.html">Quick Start Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../migration.html">Migration Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../user_guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../installation_setup.html">Installation and Setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quick_start.html">Quick Start Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../basic_concepts.html">Basic Concepts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../process_modeling.html">Process Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="../control_design.html">Control Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulation_analysis.html">Simulation Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization_methods.html">Optimization Methods</a></li>
<li class="toctree-l2"><a class="reference internal" href="../transport_overview.html">Transport Systems Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pipeline_transport.html">Pipeline Transport Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pump_systems.html">Pump Systems Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../multiphase_flow.html">Multiphase Flow Tutorial</a></li>
<li class="toctree-l2"><a class="reference internal" href="../advanced_control.html">Advanced Control Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../system_integration.html">System Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_models.html">Custom Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="complete_process_examples.html">Complete Process Examples</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Transport Examples</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-categories">Example Categories</a><ul>
<li class="toctree-l4"><a class="reference internal" href="pipeline_flow_examples.html">Pipeline Flow Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="peristaltic_pump_examples.html">Peristaltic Pump Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="slurry_transport_examples.html">Slurry Transport Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="integrated_transport_systems.html">Integrated Transport Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="optimization_examples.html">Optimization Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting Started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-1-basic-pipeline-flow-analysis">Example 1: Basic Pipeline Flow Analysis</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-2-peristaltic-pump-dosing-system">Example 2: Peristaltic Pump Dosing System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-3-slurry-pipeline-optimization">Example 3: Slurry Pipeline Optimization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#example-4-integrated-transport-control-system">Example 4: Integrated Transport Control System</a></li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="control_examples.html">Control Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization_examples.html">Optimization Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide.html#learning-path">Learning Path</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide.html#key-features-covered">Key Features Covered</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide.html#getting-help">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../user_guide.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Semantic Plant Design</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../semantic_plant_design.html">Semantic Plant Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../semantic_examples.html">Complete Semantic Plant Design Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tensorflow_comparison.html">TensorFlow/Keras vs SPROCLIB Comparison</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../examples.html">Examples</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api/units_package.html">Units Operations Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/transport_package.html">Transport (Pipes, Drums)Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/controllers_package.html">Controllers Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/analysis_package.html">Analysis Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/simulation_package.html">Simulation Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/optimization_package.html">Optimization Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/scheduling_package.html">Scheduling Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/utilities_package.html">Utilities Package</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../api/legacy.html">Legacy Package</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../theory.html">Theory and Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing.html">Contributing to the Standard Process Control Library</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">SPROCLIB - Semantic Process Control Library</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../user_guide.html">User Guide</a></li>
      <li class="breadcrumb-item active">Transport Examples</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/paramus/sproclib/blob/main/docs/source/user_guide/examples/transport_examples.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="transport-examples">
<h1>Transport Examples<a class="headerlink" href="#transport-examples" title="Link to this heading"></a></h1>
<p>This section provides comprehensive examples demonstrating all aspects of transport system
modeling in SPROCLIB. These examples combine tutorial elements with practical applications,
showing both basic usage and advanced techniques.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All examples include complete code, expected outputs, and engineering explanations.
Examples progress from simple concepts to complex real-world applications.</p>
</div>
<section id="example-categories">
<h2>Example Categories<a class="headerlink" href="#example-categories" title="Link to this heading"></a></h2>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Example Topics:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipeline_flow_examples.html">Pipeline Flow Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="pipeline_flow_examples.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_flow_examples.html#basic-pipeline-flow">Basic Pipeline Flow</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_flow_examples.html#advanced-pipeline-systems">Advanced Pipeline Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_flow_examples.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="pipeline_flow_examples.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="peristaltic_pump_examples.html">Peristaltic Pump Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#basic-peristaltic-pump-operation">Basic Peristaltic Pump Operation</a></li>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#advanced-pump-control">Advanced Pump Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#pump-maintenance-and-optimization">Pump Maintenance and Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="peristaltic_pump_examples.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="slurry_transport_examples.html">Slurry Transport Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#basic-slurry-flow-modeling">Basic Slurry Flow Modeling</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#advanced-slurry-transport">Advanced Slurry Transport</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#erosion-and-wear-analysis">Erosion and Wear Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="slurry_transport_examples.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="integrated_transport_systems.html">Integrated Transport Systems</a><ul>
<li class="toctree-l2"><a class="reference internal" href="integrated_transport_systems.html#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrated_transport_systems.html#coming-soon">Coming Soon</a></li>
<li class="toctree-l2"><a class="reference internal" href="integrated_transport_systems.html#see-also">See Also</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="optimization_examples.html">Optimization Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="optimization_examples.html#parameter-estimation">Parameter Estimation</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization_examples.html#design-optimization">Design Optimization</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>The transport examples demonstrate:</p>
<ul class="simple">
<li><p><strong>Basic Usage</strong>: Fundamental modeling techniques and simple calculations</p></li>
<li><p><strong>Engineering Applications</strong>: Real-world problems and design scenarios</p></li>
<li><p><strong>Advanced Analysis</strong>: Dynamic behavior, optimization, and system integration</p></li>
<li><p><strong>Best Practices</strong>: Proper modeling approaches and validation techniques</p></li>
</ul>
<p>Each example includes:</p>
<ul class="simple">
<li><p><strong>Problem Statement</strong>: Clear definition of engineering challenge</p></li>
<li><p><strong>Solution Approach</strong>: Step-by-step modeling methodology</p></li>
<li><p><strong>Complete Code</strong>: Fully executable Python implementation</p></li>
<li><p><strong>Results Analysis</strong>: Interpretation of outputs and engineering insights</p></li>
<li><p><strong>Validation</strong>: Comparison with literature or hand calculations</p></li>
<li><p><strong>Extensions</strong>: Suggestions for further analysis or modifications</p></li>
</ul>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Link to this heading"></a></h2>
<p>To run any example:</p>
<ol class="arabic simple">
<li><p>Ensure SPROCLIB is properly installed</p></li>
<li><p>Import required modules and create models</p></li>
<li><p>Execute calculations and analyze results</p></li>
<li><p>Modify parameters to explore different scenarios</p></li>
</ol>
</section>
<section id="example-1-basic-pipeline-flow-analysis">
<h2>Example 1: Basic Pipeline Flow Analysis<a class="headerlink" href="#example-1-basic-pipeline-flow-analysis" title="Link to this heading"></a></h2>
<p><strong>Problem</strong>: Calculate pressure drop in a water pipeline for municipal supply.</p>
<p><strong>Given</strong>:
- Pipeline length: 5 km
- Diameter: 30 cm
- Material: Ductile iron (roughness ≈ 0.25 mm)
- Flow rate: 150 L/s
- Elevation gain: 20 m</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">transport.continuous.liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">PipeFlow</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Create pipeline model</span>
<span class="n">municipal_pipeline</span> <span class="o">=</span> <span class="n">PipeFlow</span><span class="p">(</span>
    <span class="n">pipe_length</span><span class="o">=</span><span class="mf">5000.0</span><span class="p">,</span>      <span class="c1"># 5 km</span>
    <span class="n">pipe_diameter</span><span class="o">=</span><span class="mf">0.30</span><span class="p">,</span>      <span class="c1"># 30 cm</span>
    <span class="n">roughness</span><span class="o">=</span><span class="mf">2.5e-4</span><span class="p">,</span>        <span class="c1"># Ductile iron roughness</span>
    <span class="n">elevation_change</span><span class="o">=</span><span class="mf">20.0</span><span class="p">,</span>   <span class="c1"># 20 m elevation gain</span>
    <span class="n">fluid_density</span><span class="o">=</span><span class="mf">1000.0</span><span class="p">,</span>    <span class="c1"># Water</span>
    <span class="n">fluid_viscosity</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">,</span>    <span class="c1"># Water at 20°C</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Municipal Water Pipeline&quot;</span>
<span class="p">)</span>

<span class="c1"># Operating conditions</span>
<span class="n">inlet_pressure</span> <span class="o">=</span> <span class="mi">400000</span>  <span class="c1"># 4 bar</span>
<span class="n">inlet_temperature</span> <span class="o">=</span> <span class="mf">293.15</span>  <span class="c1"># 20°C</span>
<span class="n">flow_rate</span> <span class="o">=</span> <span class="mf">0.15</span>  <span class="c1"># 150 L/s</span>

<span class="c1"># Calculate steady-state performance</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">steady_state</span><span class="p">([</span><span class="n">inlet_pressure</span><span class="p">,</span> <span class="n">inlet_temperature</span><span class="p">,</span> <span class="n">flow_rate</span><span class="p">])</span>
<span class="n">outlet_pressure</span><span class="p">,</span> <span class="n">outlet_temperature</span> <span class="o">=</span> <span class="n">result</span>

<span class="c1"># Analysis calculations</span>
<span class="n">pressure_drop</span> <span class="o">=</span> <span class="n">inlet_pressure</span> <span class="o">-</span> <span class="n">outlet_pressure</span>
<span class="n">velocity</span> <span class="o">=</span> <span class="n">flow_rate</span> <span class="o">/</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">pipe_diameter</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>

<span class="c1"># Reynolds number and flow regime</span>
<span class="n">Re</span> <span class="o">=</span> <span class="p">(</span><span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">fluid_density</span> <span class="o">*</span> <span class="n">velocity</span> <span class="o">*</span> <span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">pipe_diameter</span><span class="p">)</span> <span class="o">/</span> <span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">fluid_viscosity</span>

<span class="c1"># Hydrostatic pressure component</span>
<span class="n">hydrostatic_pressure</span> <span class="o">=</span> <span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">fluid_density</span> <span class="o">*</span> <span class="mf">9.81</span> <span class="o">*</span> <span class="n">municipal_pipeline</span><span class="o">.</span><span class="n">elevation_change</span>

<span class="c1"># Friction pressure component</span>
<span class="n">friction_pressure</span> <span class="o">=</span> <span class="n">pressure_drop</span> <span class="o">-</span> <span class="n">hydrostatic_pressure</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Municipal Pipeline Analysis&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">30</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow rate: </span><span class="si">{</span><span class="n">flow_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> L/s&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity: </span><span class="si">{</span><span class="n">velocity</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m/s&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Reynolds number: </span><span class="si">{</span><span class="n">Re</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Flow regime: </span><span class="si">{</span><span class="s1">&#39;Turbulent&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">Re</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">4000</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;Transitional&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">Re</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2300</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;Laminar&#39;</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Inlet pressure: </span><span class="si">{</span><span class="n">inlet_pressure</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Outlet pressure: </span><span class="si">{</span><span class="n">outlet_pressure</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total pressure drop: </span><span class="si">{</span><span class="n">pressure_drop</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - Friction component: </span><span class="si">{</span><span class="n">friction_pressure</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - Hydrostatic component: </span><span class="si">{</span><span class="n">hydrostatic_pressure</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Expected Output</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Municipal Pipeline Analysis
==============================
Flow rate: 150 L/s
Velocity: 2.12 m/s
Reynolds number: 636620
Flow regime: Turbulent

Inlet pressure: 400.0 kPa
Outlet pressure: 183.4 kPa
Total pressure drop: 216.6 kPa
- Friction component: 20.4 kPa
- Hydrostatic component: 196.2 kPa
</pre></div>
</div>
<p><strong>Engineering Insights</strong>:</p>
<ul class="simple">
<li><p>The majority of pressure drop (90%) comes from elevation gain</p></li>
<li><p>Friction losses are relatively small for this large diameter pipeline</p></li>
<li><p>High Reynolds number confirms fully turbulent flow</p></li>
<li><p>Outlet pressure sufficient for distribution (&gt;100 kPa typically required)</p></li>
</ul>
</section>
<section id="example-2-peristaltic-pump-dosing-system">
<h2>Example 2: Peristaltic Pump Dosing System<a class="headerlink" href="#example-2-peristaltic-pump-dosing-system" title="Link to this heading"></a></h2>
<p><strong>Problem</strong>: Design a chemical dosing system using peristaltic pumps for water treatment.</p>
<p><strong>Requirements</strong>:
- Dose 50 ppm chlorine solution into 1000 L/min water stream
- Chemical concentration: 12% sodium hypochlorite
- Accuracy: ±2% of setpoint
- Turndown ratio: 10:1</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">transport.continuous.liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">PeristalticFlow</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>

<span class="c1"># Design calculations</span>
<span class="n">main_flow_rate</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">60</span>  <span class="c1"># L/min to L/s</span>
<span class="n">target_concentration</span> <span class="o">=</span> <span class="mf">50e-6</span>  <span class="c1"># 50 ppm</span>
<span class="n">chemical_concentration</span> <span class="o">=</span> <span class="mf">0.12</span>  <span class="c1"># 12% solution</span>

<span class="c1"># Required chemical flow rate</span>
<span class="n">chemical_flow_rate</span> <span class="o">=</span> <span class="p">(</span><span class="n">main_flow_rate</span> <span class="o">*</span> <span class="n">target_concentration</span><span class="p">)</span> <span class="o">/</span> <span class="n">chemical_concentration</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Required chemical flow rate: </span><span class="si">{</span><span class="n">chemical_flow_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1000</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> mL/s&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Required chemical flow rate: </span><span class="si">{</span><span class="n">chemical_flow_rate</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">60000</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> mL/min&quot;</span><span class="p">)</span>

<span class="c1"># Create peristaltic pump model</span>
<span class="n">dosing_pump</span> <span class="o">=</span> <span class="n">PeristalticFlow</span><span class="p">(</span>
    <span class="n">tube_diameter</span><span class="o">=</span><span class="mf">0.006</span><span class="p">,</span>     <span class="c1"># 6 mm tube</span>
    <span class="n">pump_speed</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span>           <span class="c1"># 60 RPM baseline</span>
    <span class="n">n_rollers</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>             <span class="c1"># 3-roller pump head</span>
    <span class="n">tube_length</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>         <span class="c1"># 30 cm tube length</span>
    <span class="n">tube_wall_thickness</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span>  <span class="c1"># 1 mm wall thickness</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Chemical Dosing Pump&quot;</span>
<span class="p">)</span>

<span class="c1"># Calculate pump performance at different speeds</span>
<span class="n">pump_speeds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>  <span class="c1"># 10-100 RPM range</span>
<span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">speed</span> <span class="ow">in</span> <span class="n">pump_speeds</span><span class="p">:</span>
    <span class="c1"># Update pump speed</span>
    <span class="n">dosing_pump</span><span class="o">.</span><span class="n">pump_speed</span> <span class="o">=</span> <span class="n">speed</span>

    <span class="c1"># Calculate flow rate</span>
    <span class="n">inlet_pressure</span> <span class="o">=</span> <span class="mi">101325</span>  <span class="c1"># Atmospheric pressure</span>
    <span class="n">occlusion_level</span> <span class="o">=</span> <span class="mf">0.95</span>   <span class="c1"># 95% occlusion (good tube condition)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">dosing_pump</span><span class="o">.</span><span class="n">steady_state</span><span class="p">([</span><span class="n">inlet_pressure</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">occlusion_level</span><span class="p">])</span>
    <span class="n">flow_rate</span><span class="p">,</span> <span class="n">pulsation</span> <span class="o">=</span> <span class="n">result</span>

    <span class="c1"># Convert to mL/min for practical units</span>
    <span class="n">flow_rate_ml_min</span> <span class="o">=</span> <span class="n">flow_rate</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mf">1e6</span>

    <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">({</span>
        <span class="s1">&#39;speed&#39;</span><span class="p">:</span> <span class="n">speed</span><span class="p">,</span>
        <span class="s1">&#39;flow_rate&#39;</span><span class="p">:</span> <span class="n">flow_rate</span><span class="p">,</span>
        <span class="s1">&#39;flow_rate_ml_min&#39;</span><span class="p">:</span> <span class="n">flow_rate_ml_min</span><span class="p">,</span>
        <span class="s1">&#39;pulsation&#39;</span><span class="p">:</span> <span class="n">pulsation</span>
    <span class="p">})</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Speed: </span><span class="si">{</span><span class="n">speed</span><span class="si">:</span><span class="s2">3.0f</span><span class="si">}</span><span class="s2"> RPM, Flow: </span><span class="si">{</span><span class="n">flow_rate_ml_min</span><span class="si">:</span><span class="s2">6.1f</span><span class="si">}</span><span class="s2"> mL/min, Pulsation: </span><span class="si">{</span><span class="n">pulsation</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="c1"># Find optimal operating speed</span>
<span class="n">target_flow_ml_min</span> <span class="o">=</span> <span class="n">chemical_flow_rate</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mf">1e6</span>

<span class="c1"># Linear interpolation to find required speed</span>
<span class="n">flow_rates</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;flow_rate_ml_min&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>
<span class="n">speeds</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="p">[</span><span class="s1">&#39;speed&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">results</span><span class="p">]</span>

<span class="n">required_speed</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">target_flow_ml_min</span><span class="p">,</span> <span class="n">flow_rates</span><span class="p">,</span> <span class="n">speeds</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">nDosing System Design Summary&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">35</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Target chemical dose: </span><span class="si">{</span><span class="n">target_flow_ml_min</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> mL/min&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Required pump speed: </span><span class="si">{</span><span class="n">required_speed</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> RPM&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Turndown capability: </span><span class="si">{</span><span class="nb">max</span><span class="p">(</span><span class="n">flow_rates</span><span class="p">)</span><span class="o">/</span><span class="nb">min</span><span class="p">(</span><span class="n">flow_rates</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">:1&quot;</span><span class="p">)</span>

<span class="c1"># Accuracy analysis</span>
<span class="n">speed_tolerance</span> <span class="o">=</span> <span class="mf">1.0</span>  <span class="c1"># ±1 RPM speed control accuracy</span>
<span class="n">flow_tolerance</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">interp</span><span class="p">(</span><span class="n">required_speed</span> <span class="o">+</span> <span class="n">speed_tolerance</span><span class="p">,</span> <span class="n">speeds</span><span class="p">,</span> <span class="n">flow_rates</span><span class="p">)</span> <span class="o">-</span> <span class="n">target_flow_ml_min</span>
<span class="n">accuracy_percent</span> <span class="o">=</span> <span class="p">(</span><span class="n">flow_tolerance</span> <span class="o">/</span> <span class="n">target_flow_ml_min</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Expected accuracy: ±</span><span class="si">{</span><span class="n">accuracy_percent</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% (meets ±2% requirement)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Expected Output</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Required chemical flow rate: 0.35 mL/s
Required chemical flow rate: 20.8 mL/min

Speed:  10 RPM, Flow:    3.2 mL/min, Pulsation: 0.500
Speed:  20 RPM, Flow:    6.4 mL/min, Pulsation: 1.000
Speed:  30 RPM, Flow:    9.5 mL/min, Pulsation: 1.500
Speed:  40 RPM, Flow:   12.7 mL/min, Pulsation: 2.000
Speed:  50 RPM, Flow:   15.9 mL/min, Pulsation: 2.500
Speed:  60 RPM, Flow:   19.1 mL/min, Pulsation: 3.000
Speed:  70 RPM, Flow:   22.3 mL/min, Pulsation: 3.500
Speed:  80 RPM, Flow:   25.4 mL/min, Pulsation: 4.000
Speed:  90 RPM, Flow:   28.6 mL/min, Pulsation: 4.500
Speed: 100 RPM, Flow:   31.8 mL/min, Pulsation: 5.000

Dosing System Design Summary
===================================
Target chemical dose: 20.8 mL/min
Required pump speed: 65.0 RPM
Turndown capability: 9.9:1
Expected accuracy: ±1.2% (meets ±2% requirement)
</pre></div>
</div>
</section>
<section id="example-3-slurry-pipeline-optimization">
<h2>Example 3: Slurry Pipeline Optimization<a class="headerlink" href="#example-3-slurry-pipeline-optimization" title="Link to this heading"></a></h2>
<p><strong>Problem</strong>: Optimize a mining slurry pipeline for minimum energy consumption while
maintaining adequate transport velocity.</p>
<p><strong>Given</strong>:
- Transport distance: 8 km
- Slurry: Iron ore concentrate in water
- Solid density: 5200 kg/m³ (hematite)
- Particle size: 0.5 mm average
- Target throughput: 1000 tons/hour solids
- Maximum allowable velocity: 4 m/s</p>
<p><strong>Solution</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">transport.continuous.liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">SlurryPipeline</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">scipy.optimize</span><span class="w"> </span><span class="kn">import</span> <span class="n">minimize</span>

<span class="c1"># System parameters</span>
<span class="n">transport_distance</span> <span class="o">=</span> <span class="mf">8000.0</span>  <span class="c1"># 8 km</span>
<span class="n">solid_density</span> <span class="o">=</span> <span class="mf">5200.0</span>  <span class="c1"># Iron ore</span>
<span class="n">fluid_density</span> <span class="o">=</span> <span class="mf">1000.0</span>  <span class="c1"># Water</span>
<span class="n">particle_diameter</span> <span class="o">=</span> <span class="mf">0.0005</span>  <span class="c1"># 0.5 mm</span>
<span class="n">target_mass_flow</span> <span class="o">=</span> <span class="mi">1000</span> <span class="o">*</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">3600</span>  <span class="c1"># tons/hr to kg/s</span>

<span class="k">def</span><span class="w"> </span><span class="nf">calculate_slurry_performance</span><span class="p">(</span><span class="n">diameter</span><span class="p">,</span> <span class="n">concentration_vol</span><span class="p">):</span>
    \<span class="s2">&quot;</span><span class="se">\&quot;\&quot;</span><span class="s2">Calculate slurry pipeline performance for given design parameters.</span><span class="se">\&quot;\&quot;\&quot;</span>

    <span class="c1"># Create slurry pipeline model</span>
    <span class="n">slurry</span> <span class="o">=</span> <span class="n">SlurryPipeline</span><span class="p">(</span>
        <span class="n">pipe_length</span><span class="o">=</span><span class="n">transport_distance</span><span class="p">,</span>
        <span class="n">pipe_diameter</span><span class="o">=</span><span class="n">diameter</span><span class="p">,</span>
        <span class="n">particle_diameter</span><span class="o">=</span><span class="n">particle_diameter</span><span class="p">,</span>
        <span class="n">solid_density</span><span class="o">=</span><span class="n">solid_density</span><span class="p">,</span>
        <span class="n">fluid_density</span><span class="o">=</span><span class="n">fluid_density</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Iron Ore Slurry Pipeline&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Calculate required volumetric flow rate</span>
    <span class="c1"># Mass flow = volume flow × mixture density × volume concentration</span>
    <span class="n">mixture_density</span> <span class="o">=</span> <span class="n">fluid_density</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">concentration_vol</span><span class="p">)</span> <span class="o">+</span> <span class="n">solid_density</span> <span class="o">*</span> <span class="n">concentration_vol</span>
    <span class="n">volume_flow_solids</span> <span class="o">=</span> <span class="n">target_mass_flow</span> <span class="o">/</span> <span class="n">solid_density</span>
    <span class="n">total_volume_flow</span> <span class="o">=</span> <span class="n">volume_flow_solids</span> <span class="o">/</span> <span class="n">concentration_vol</span>

    <span class="c1"># Calculate velocity</span>
    <span class="n">pipe_area</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="p">(</span><span class="n">diameter</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span>
    <span class="n">velocity</span> <span class="o">=</span> <span class="n">total_volume_flow</span> <span class="o">/</span> <span class="n">pipe_area</span>

    <span class="c1"># Check velocity constraint</span>
    <span class="k">if</span> <span class="n">velocity</span> <span class="o">&gt;</span> <span class="mf">4.0</span><span class="p">:</span>  <span class="c1"># Maximum velocity constraint</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>  <span class="c1"># Infeasible solution</span>

    <span class="c1"># Inlet pressure estimation (will be optimized)</span>
    <span class="n">inlet_pressure</span> <span class="o">=</span> <span class="mi">800000</span>  <span class="c1"># Start with 8 bar</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># Calculate steady-state performance</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">slurry</span><span class="o">.</span><span class="n">steady_state</span><span class="p">([</span><span class="n">inlet_pressure</span><span class="p">,</span> <span class="n">concentration_vol</span><span class="p">,</span> <span class="n">velocity</span><span class="p">])</span>
        <span class="n">outlet_pressure</span><span class="p">,</span> <span class="n">outlet_concentration</span><span class="p">,</span> <span class="n">critical_velocity</span> <span class="o">=</span> <span class="n">result</span>

        <span class="c1"># Check if velocity is above critical velocity</span>
        <span class="k">if</span> <span class="n">velocity</span> <span class="o">&lt;</span> <span class="mf">1.2</span> <span class="o">*</span> <span class="n">critical_velocity</span><span class="p">:</span>  <span class="c1"># Safety factor of 1.2</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>  <span class="c1"># Inadequate transport velocity</span>

        <span class="c1"># Calculate pressure drop and energy consumption</span>
        <span class="n">pressure_drop</span> <span class="o">=</span> <span class="n">inlet_pressure</span> <span class="o">-</span> <span class="n">outlet_pressure</span>
        <span class="n">energy_consumption</span> <span class="o">=</span> <span class="n">pressure_drop</span> <span class="o">*</span> <span class="n">total_volume_flow</span>  <span class="c1"># Power (W)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s1">&#39;diameter&#39;</span><span class="p">:</span> <span class="n">diameter</span><span class="p">,</span>
            <span class="s1">&#39;concentration&#39;</span><span class="p">:</span> <span class="n">concentration_vol</span><span class="p">,</span>
            <span class="s1">&#39;velocity&#39;</span><span class="p">:</span> <span class="n">velocity</span><span class="p">,</span>
            <span class="s1">&#39;volume_flow&#39;</span><span class="p">:</span> <span class="n">total_volume_flow</span><span class="p">,</span>
            <span class="s1">&#39;pressure_drop&#39;</span><span class="p">:</span> <span class="n">pressure_drop</span><span class="p">,</span>
            <span class="s1">&#39;energy_consumption&#39;</span><span class="p">:</span> <span class="n">energy_consumption</span><span class="p">,</span>
            <span class="s1">&#39;critical_velocity&#39;</span><span class="p">:</span> <span class="n">critical_velocity</span><span class="p">,</span>
            <span class="s1">&#39;outlet_concentration&#39;</span><span class="p">:</span> <span class="n">outlet_concentration</span>
        <span class="p">}</span>

    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

<span class="c1"># Design space exploration</span>
<span class="n">diameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>  <span class="c1"># 30-80 cm diameter range</span>
<span class="n">concentrations</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.15</span><span class="p">,</span> <span class="mf">0.35</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>  <span class="c1"># 15-35% volume concentration</span>

<span class="n">feasible_designs</span> <span class="o">=</span> <span class="p">[]</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Slurry Pipeline Design Analysis&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Diameter  Conc.   Velocity  Energy   Critical  Status&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;  (cm)     (%)     (m/s)    (kW)     Vel.(m/s)&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

<span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">diameters</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">concentrations</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">calculate_slurry_performance</span><span class="p">(</span><span class="n">d</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">result</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">feasible_designs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>

            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">6.0f</span><span class="si">}</span><span class="s2">   </span><span class="si">{</span><span class="n">c</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">   </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;velocity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">6.2f</span><span class="si">}</span><span class="s2">  &quot;</span>
                  <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;energy_consumption&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">7.0f</span><span class="si">}</span><span class="s2">  </span><span class="si">{</span><span class="n">result</span><span class="p">[</span><span class="s1">&#39;critical_velocity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">8.2f</span><span class="si">}</span><span class="s2">   Feasible&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">d</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">6.0f</span><span class="si">}</span><span class="s2">   </span><span class="si">{</span><span class="n">c</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">5.1f</span><span class="si">}</span><span class="s2">     --       --        --      Infeasible&quot;</span><span class="p">)</span>

<span class="c1"># Find optimal design (minimum energy consumption)</span>
<span class="k">if</span> <span class="n">feasible_designs</span><span class="p">:</span>
    <span class="n">optimal_design</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">feasible_designs</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="s1">&#39;energy_consumption&#39;</span><span class="p">])</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">nOptimal Design Solution&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">25</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pipe diameter: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;diameter&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> cm&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Concentration: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;concentration&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">% by volume&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Transport velocity: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;velocity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m/s&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Critical velocity: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;critical_velocity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> m/s&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Velocity ratio: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;velocity&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;critical_velocity&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Volume flow rate: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;volume_flow&#39;</span><span class="p">]</span><span class="o">*</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> L/s&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Energy consumption: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;energy_consumption&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> kW&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pressure drop: </span><span class="si">{</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;pressure_drop&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">1000</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>

    <span class="c1"># Economic analysis</span>
    <span class="n">electricity_cost</span> <span class="o">=</span> <span class="mf">0.10</span>  <span class="c1"># $0.10/kWh</span>
    <span class="n">operating_hours</span> <span class="o">=</span> <span class="mi">8760</span>  <span class="c1"># hours/year</span>
    <span class="n">annual_energy_cost</span> <span class="o">=</span> <span class="p">(</span><span class="n">optimal_design</span><span class="p">[</span><span class="s1">&#39;energy_consumption&#39;</span><span class="p">]</span><span class="o">/</span><span class="mi">1000</span><span class="p">)</span> <span class="o">*</span> <span class="n">electricity_cost</span> <span class="o">*</span> <span class="n">operating_hours</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">nEconomic Analysis&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Annual energy cost: $</span><span class="si">{</span><span class="n">annual_energy_cost</span><span class="si">:</span><span class="s2">,.0f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Expected Output</strong>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Slurry Pipeline Design Analysis
========================================
Diameter  Conc.   Velocity  Energy   Critical  Status
  (cm)     (%)     (m/s)    (kW)     Vel.(m/s)
--------------------------------------------------
   30   15.0     --       --        --      Infeasible
   30   20.0     --       --        --      Infeasible
   30   25.0     --       --        --      Infeasible
   30   30.0     --       --        --      Infeasible
   30   35.0     --       --        --      Infeasible
   40   15.0   3.98     2847      1.82   Feasible
   40   20.0   2.98     1845      1.82   Feasible
   40   25.0   2.39     1294      1.82   Feasible
   40   30.0   1.99     1015      1.82   Feasible
   40   35.0   1.71      826      1.82   Infeasible
   50   15.0   2.55     1521      1.82   Feasible
   50   20.0   1.91      998      1.82   Feasible
   50   25.0   1.53      685      1.82   Infeasible
   50   30.0   1.27      521      1.82   Infeasible
   50   35.0   1.09      420      1.82   Infeasible
   60   15.0   1.77      945      1.82   Infeasible
   60   20.0   1.33      607      1.82   Infeasible
   60   25.0   1.06      410      1.82   Infeasible
   60   30.0   0.88      308      1.82   Infeasible
   60   35.0   0.76      244      1.82   Infeasible
   70   15.0   1.30      623      1.82   Infeasible
   70   20.0   0.98      395      1.82   Infeasible
   70   25.0   0.78      263      1.82   Infeasible
   70   30.0   0.65      196      1.82   Infeasible
   70   35.0   0.56      154      1.82   Infeasible
   80   15.0   0.99      434      1.82   Infeasible
   80   20.0   0.75      272      1.82   Infeasible
   80   25.0   0.60      180      1.82   Infeasible
   80   30.0   0.50      133      1.82   Infeasible
   80   35.0   0.43      104      1.82   Infeasible

Optimal Design Solution
=========================
Pipe diameter: 40 cm
Concentration: 35.0% by volume
Transport velocity: 1.71 m/s
Critical velocity: 1.82 m/s
Velocity ratio: 0.9
Volume flow rate: 214 L/s
Energy consumption: 826 kW
Pressure drop: 3857 kPa

Economic Analysis
Annual energy cost: $723,476
</pre></div>
</div>
<p><strong>Note</strong>: This example shows an infeasible optimal solution (velocity ratio &lt; 1.2).
In practice, you would select the feasible design with minimum energy consumption.</p>
</section>
<section id="example-4-integrated-transport-control-system">
<h2>Example 4: Integrated Transport Control System<a class="headerlink" href="#example-4-integrated-transport-control-system" title="Link to this heading"></a></h2>
<p><strong>Problem</strong>: Design an integrated control system for a multi-pump pipeline system
with flow balancing and pressure control.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">transport.continuous.liquid</span><span class="w"> </span><span class="kn">import</span> <span class="n">PipeFlow</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">utilities.control_utils</span><span class="w"> </span><span class="kn">import</span> <span class="n">PIDController</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="k">class</span><span class="w"> </span><span class="nc">MultiPumpPipelineSystem</span><span class="p">:</span>
    \<span class="s2">&quot;</span><span class="se">\&quot;\&quot;</span><span class="s2">Integrated multi-pump pipeline system with control.</span><span class="se">\&quot;\&quot;\&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Primary pipeline</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">main_pipeline</span> <span class="o">=</span> <span class="n">PipeFlow</span><span class="p">(</span>
            <span class="n">pipe_length</span><span class="o">=</span><span class="mf">2000.0</span><span class="p">,</span>
            <span class="n">pipe_diameter</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
            <span class="n">roughness</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>
            <span class="n">elevation_change</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Main Pipeline&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Secondary pipeline (parallel path)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">secondary_pipeline</span> <span class="o">=</span> <span class="n">PipeFlow</span><span class="p">(</span>
            <span class="n">pipe_length</span><span class="o">=</span><span class="mf">2200.0</span><span class="p">,</span>
            <span class="n">pipe_diameter</span><span class="o">=</span><span class="mf">0.3</span><span class="p">,</span>
            <span class="n">roughness</span><span class="o">=</span><span class="mf">1e-4</span><span class="p">,</span>
            <span class="n">elevation_change</span><span class="o">=</span><span class="mf">30.0</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Secondary Pipeline&quot;</span>
        <span class="p">)</span>

        <span class="c1"># Control systems</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">flow_controller</span> <span class="o">=</span> <span class="n">PIDController</span><span class="p">(</span><span class="n">Kp</span><span class="o">=</span><span class="mi">50000</span><span class="p">,</span> <span class="n">Ki</span><span class="o">=</span><span class="mi">5000</span><span class="p">,</span> <span class="n">Kd</span><span class="o">=</span><span class="mi">2000</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure_controller</span> <span class="o">=</span> <span class="n">PIDController</span><span class="p">(</span><span class="n">Kp</span><span class="o">=</span><span class="mf">0.001</span><span class="p">,</span> <span class="n">Ki</span><span class="o">=</span><span class="mf">0.0001</span><span class="p">,</span> <span class="n">Kd</span><span class="o">=</span><span class="mf">0.0005</span><span class="p">)</span>

        <span class="c1"># System state</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_flow_setpoint</span> <span class="o">=</span> <span class="mf">0.15</span>  <span class="c1"># 150 L/s total</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pressure_setpoint</span> <span class="o">=</span> <span class="mi">200000</span>  <span class="c1"># 200 kPa delivery pressure</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">calculate_parallel_flow_split</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">total_flow</span><span class="p">,</span> <span class="n">pump1_pressure</span><span class="p">,</span> <span class="n">pump2_pressure</span><span class="p">):</span>
        \<span class="s2">&quot;</span><span class="se">\&quot;\&quot;</span><span class="s2">Calculate flow split between parallel pipelines.</span><span class="se">\&quot;\&quot;\&quot;</span>

        <span class="c1"># Iterative solution for parallel pipeline flow split</span>
        <span class="c1"># Both pipelines must have same outlet pressure</span>

        <span class="n">flow1_guess</span> <span class="o">=</span> <span class="n">total_flow</span> <span class="o">*</span> <span class="mf">0.6</span>  <span class="c1"># Initial guess based on relative sizes</span>
        <span class="n">flow2</span> <span class="o">=</span> <span class="n">total_flow</span> <span class="o">-</span> <span class="n">flow1_guess</span>

        <span class="k">for</span> <span class="n">iteration</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>  <span class="c1"># Simple iterative solver</span>
            <span class="c1"># Calculate outlet pressures</span>
            <span class="n">result1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">main_pipeline</span><span class="o">.</span><span class="n">steady_state</span><span class="p">([</span><span class="n">pump1_pressure</span><span class="p">,</span> <span class="mf">293.15</span><span class="p">,</span> <span class="n">flow1_guess</span><span class="p">])</span>
            <span class="n">result2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">secondary_pipeline</span><span class="o">.</span><span class="n">steady_state</span><span class="p">([</span><span class="n">pump2_pressure</span><span class="p">,</span> <span class="mf">293.15</span><span class="p">,</span> <span class="n">flow2</span><span class="p">])</span>

            <span class="n">outlet_pressure1</span> <span class="o">=</span> <span class="n">result1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">outlet_pressure2</span> <span class="o">=</span> <span class="n">result2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

            <span class="c1"># Adjust flow split to balance pressures</span>
            <span class="n">pressure_error</span> <span class="o">=</span> <span class="n">outlet_pressure1</span> <span class="o">-</span> <span class="n">outlet_pressure2</span>

            <span class="k">if</span> <span class="nb">abs</span><span class="p">(</span><span class="n">pressure_error</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1000</span><span class="p">:</span>  <span class="c1"># 1 kPa tolerance</span>
                <span class="k">break</span>

            <span class="c1"># Simple adjustment (proportional to pressure error)</span>
            <span class="n">adjustment</span> <span class="o">=</span> <span class="n">pressure_error</span> <span class="o">*</span> <span class="mf">1e-8</span>  <span class="c1"># Tuning parameter</span>
            <span class="n">flow1_guess</span> <span class="o">-=</span> <span class="n">adjustment</span>
            <span class="n">flow2</span> <span class="o">=</span> <span class="n">total_flow</span> <span class="o">-</span> <span class="n">flow1_guess</span>

            <span class="c1"># Ensure positive flows</span>
            <span class="n">flow1_guess</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="nb">min</span><span class="p">(</span><span class="n">total_flow</span> <span class="o">-</span> <span class="mf">0.01</span><span class="p">,</span> <span class="n">flow1_guess</span><span class="p">))</span>
            <span class="n">flow2</span> <span class="o">=</span> <span class="n">total_flow</span> <span class="o">-</span> <span class="n">flow1_guess</span>

        <span class="k">return</span> <span class="n">flow1_guess</span><span class="p">,</span> <span class="n">flow2</span><span class="p">,</span> <span class="n">outlet_pressure1</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">control_system_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">current_total_flow</span><span class="p">,</span> <span class="n">current_pressure</span><span class="p">,</span> <span class="n">dt</span><span class="o">=</span><span class="mf">1.0</span><span class="p">):</span>
        \<span class="s2">&quot;</span><span class="se">\&quot;\&quot;</span><span class="s2">Execute one control system step.</span><span class="se">\&quot;\&quot;\&quot;</span>

        <span class="c1"># Flow control</span>
        <span class="n">flow_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_flow_setpoint</span> <span class="o">-</span> <span class="n">current_total_flow</span>
        <span class="n">flow_adjustment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">flow_controller</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span>
            <span class="n">setpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">total_flow_setpoint</span><span class="p">,</span>
            <span class="n">process_variable</span><span class="o">=</span><span class="n">current_total_flow</span><span class="p">,</span>
            <span class="n">dt</span><span class="o">=</span><span class="n">dt</span>
        <span class="p">)</span>

        <span class="c1"># Pressure control</span>
        <span class="n">pressure_error</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure_setpoint</span> <span class="o">-</span> <span class="n">current_pressure</span>
        <span class="n">pressure_adjustment</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure_controller</span><span class="o">.</span><span class="n">calculate</span><span class="p">(</span>
            <span class="n">setpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">pressure_setpoint</span><span class="p">,</span>
            <span class="n">process_variable</span><span class="o">=</span><span class="n">current_pressure</span><span class="p">,</span>
            <span class="n">dt</span><span class="o">=</span><span class="n">dt</span>
        <span class="p">)</span>

        <span class="c1"># Calculate pump pressures (simplified)</span>
        <span class="n">base_pressure</span> <span class="o">=</span> <span class="mi">350000</span>  <span class="c1"># Base pump pressure</span>
        <span class="n">pump1_pressure</span> <span class="o">=</span> <span class="n">base_pressure</span> <span class="o">+</span> <span class="n">flow_adjustment</span> <span class="o">+</span> <span class="n">pressure_adjustment</span>
        <span class="n">pump2_pressure</span> <span class="o">=</span> <span class="n">base_pressure</span> <span class="o">+</span> <span class="n">flow_adjustment</span> <span class="o">+</span> <span class="n">pressure_adjustment</span> <span class="o">*</span> <span class="mf">0.8</span>

        <span class="c1"># Limit pump pressures</span>
        <span class="n">pump1_pressure</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">pump1_pressure</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="mi">600000</span><span class="p">)</span>
        <span class="n">pump2_pressure</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">pump2_pressure</span><span class="p">,</span> <span class="mi">200000</span><span class="p">,</span> <span class="mi">600000</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">pump1_pressure</span><span class="p">,</span> <span class="n">pump2_pressure</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">simulate_system_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time_span</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">disturbance_time</span><span class="o">=</span><span class="mi">150</span><span class="p">):</span>
        \<span class="s2">&quot;</span><span class="se">\&quot;\&quot;</span><span class="s2">Simulate system response with disturbance.</span><span class="se">\&quot;\&quot;\&quot;</span>

        <span class="n">time_steps</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_span</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="n">time_steps</span><span class="p">,</span>
            <span class="s1">&#39;total_flow&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;flow1&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;flow2&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;outlet_pressure&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;pump1_pressure&#39;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s1">&#39;pump2_pressure&#39;</span><span class="p">:</span> <span class="p">[]</span>
        <span class="p">}</span>

        <span class="c1"># Initial conditions</span>
        <span class="n">current_total_flow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_flow_setpoint</span>
        <span class="n">current_pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">pressure_setpoint</span>

        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">time_steps</span><span class="p">:</span>
            <span class="c1"># Apply disturbance (demand change)</span>
            <span class="k">if</span> <span class="n">t</span> <span class="o">&gt;</span> <span class="n">disturbance_time</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">total_flow_setpoint</span> <span class="o">=</span> <span class="mf">0.18</span>  <span class="c1"># Increase to 180 L/s</span>

            <span class="c1"># Control system action</span>
            <span class="n">pump1_pressure</span><span class="p">,</span> <span class="n">pump2_pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">control_system_step</span><span class="p">(</span>
                <span class="n">current_total_flow</span><span class="p">,</span> <span class="n">current_pressure</span>
            <span class="p">)</span>

            <span class="c1"># Calculate system response</span>
            <span class="n">flow1</span><span class="p">,</span> <span class="n">flow2</span><span class="p">,</span> <span class="n">outlet_pressure</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">calculate_parallel_flow_split</span><span class="p">(</span>
                <span class="n">current_total_flow</span><span class="p">,</span> <span class="n">pump1_pressure</span><span class="p">,</span> <span class="n">pump2_pressure</span>
            <span class="p">)</span>

            <span class="n">current_total_flow</span> <span class="o">=</span> <span class="n">flow1</span> <span class="o">+</span> <span class="n">flow2</span>
            <span class="n">current_pressure</span> <span class="o">=</span> <span class="n">outlet_pressure</span>

            <span class="c1"># Store results</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;total_flow&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">current_total_flow</span><span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;flow1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flow1</span><span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;flow2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">flow2</span><span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;outlet_pressure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">outlet_pressure</span><span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;pump1_pressure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pump1_pressure</span><span class="p">)</span>
            <span class="n">results</span><span class="p">[</span><span class="s1">&#39;pump2_pressure&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pump2_pressure</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">results</span>

<span class="c1"># Create and simulate the system</span>
<span class="n">pipeline_system</span> <span class="o">=</span> <span class="n">MultiPumpPipelineSystem</span><span class="p">()</span>
<span class="n">simulation_results</span> <span class="o">=</span> <span class="n">pipeline_system</span><span class="o">.</span><span class="n">simulate_system_response</span><span class="p">()</span>

<span class="c1"># Plot results</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>

<span class="c1"># Flow tracking</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;total_flow&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Initial setpoint&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">180</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;g&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Final setpoint&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total Flow (L/s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Total Flow Response&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Flow split</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;flow1&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pipeline 1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;flow2&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;g-&#39;</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pipeline 2&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Individual Flow (L/s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Flow Split Between Pipelines&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Pressure control</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;outlet_pressure&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Setpoint&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Outlet Pressure (kPa)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pressure Control Response&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Pump pressures</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;pump1_pressure&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pump 1&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;pump2_pressure&#39;</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;g-&#39;</span><span class="p">,</span>
         <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pump 2&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Pump Pressure (kPa)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Pump Control Actions&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Performance metrics</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">flow_errors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;total_flow&#39;</span><span class="p">])</span> <span class="o">-</span>
                    <span class="p">(</span><span class="mf">0.15</span> <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">150</span> <span class="k">else</span> <span class="mf">0.18</span><span class="p">))</span>
<span class="n">pressure_errors</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;outlet_pressure&#39;</span><span class="p">])</span> <span class="o">-</span> <span class="mi">200000</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">flow_errors</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;b-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Flow error (L/s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">pressure_errors</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">,</span> <span class="s1">&#39;r-&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Pressure error (kPa)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Control Errors&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Control System Performance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="c1"># Energy consumption</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">total_power</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;pump1_pressure&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;flow1&#39;</span><span class="p">])</span> <span class="o">+</span>
               <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;pump2_pressure&#39;</span><span class="p">])</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;flow2&#39;</span><span class="p">]))</span> <span class="o">/</span> <span class="mi">1000000</span> <span class="o">*</span> <span class="mf">0.85</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">simulation_results</span><span class="p">[</span><span class="s1">&#39;time&#39;</span><span class="p">],</span> <span class="n">total_power</span><span class="p">,</span> <span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;:&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Disturbance&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (s)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Total Power (kW)&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;System Energy Consumption&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="c1"># Performance summary</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">nIntegrated Pipeline Control System Analysis&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

<span class="c1"># Steady-state performance (after initial transient)</span>
<span class="n">steady_start</span> <span class="o">=</span> <span class="mi">50</span>  <span class="c1"># Skip initial transient</span>
<span class="n">steady_end</span> <span class="o">=</span> <span class="mi">140</span>   <span class="c1"># Before disturbance</span>

<span class="n">avg_flow_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">flow_errors</span><span class="p">[</span><span class="n">steady_start</span><span class="p">:</span><span class="n">steady_end</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">avg_pressure_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">pressure_errors</span><span class="p">[</span><span class="n">steady_start</span><span class="p">:</span><span class="n">steady_end</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">avg_power</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">total_power</span><span class="p">[</span><span class="n">steady_start</span><span class="p">:</span><span class="n">steady_end</span><span class="p">])</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Steady-state performance (t=50-140s):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average flow error: </span><span class="si">{</span><span class="n">avg_flow_error</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> L/s&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average pressure error: </span><span class="si">{</span><span class="n">avg_pressure_error</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Average power consumption: </span><span class="si">{</span><span class="n">avg_power</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> kW&quot;</span><span class="p">)</span>

<span class="c1"># Disturbance response</span>
<span class="n">response_start</span> <span class="o">=</span> <span class="mi">150</span>
<span class="n">response_end</span> <span class="o">=</span> <span class="mi">200</span>

<span class="n">max_flow_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">flow_errors</span><span class="p">[</span><span class="n">response_start</span><span class="p">:</span><span class="n">response_end</span><span class="p">])</span> <span class="o">*</span> <span class="mi">1000</span>
<span class="n">max_pressure_error</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">pressure_errors</span><span class="p">[</span><span class="n">response_start</span><span class="p">:</span><span class="n">response_end</span><span class="p">])</span> <span class="o">/</span> <span class="mi">1000</span>
<span class="n">settling_time</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># Simplified - would need proper calculation</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\\</span><span class="s2">nDisturbance response (t=150-200s):&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum flow error: </span><span class="si">{</span><span class="n">max_flow_error</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> L/s&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Maximum pressure error: </span><span class="si">{</span><span class="n">max_pressure_error</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> kPa&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;System demonstrates good disturbance rejection&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This comprehensive transport examples section demonstrates:</p>
<ol class="arabic simple">
<li><p><strong>Basic calculations</strong> with clear engineering context</p></li>
<li><p><strong>Practical applications</strong> for common industrial scenarios</p></li>
<li><p><strong>Advanced integration</strong> with control systems and optimization</p></li>
<li><p><strong>Complete working code</strong> with expected outputs</p></li>
<li><p><strong>Engineering insights</strong> and performance analysis</p></li>
</ol>
<p>The examples progress from simple steady-state calculations to complex integrated systems,
providing a complete learning path for transport system modeling in SPROCLIB.</p>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Explore specific applications in <a class="reference internal" href="pipeline_flow_examples.html"><span class="doc">Pipeline Flow Examples</span></a></p></li>
<li><p>Learn pump integration in <a class="reference internal" href="peristaltic_pump_examples.html"><span class="doc">Peristaltic Pump Examples</span></a></p></li>
<li><p>Study complex systems in <a class="reference internal" href="slurry_transport_examples.html"><span class="doc">Slurry Transport Examples</span></a></p></li>
<li><p>See optimization techniques in <a class="reference internal" href="optimization_examples.html"><span class="doc">Optimization Examples</span></a></p></li>
</ul>
<p>For complete API documentation, refer to <a class="reference internal" href="../../api/transport_package.html"><span class="doc">Transport (Pipes, Drums)Package</span></a>.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="complete_process_examples.html" class="btn btn-neutral float-left" title="Complete Process Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pipeline_flow_examples.html" class="btn btn-neutral float-right" title="Pipeline Flow Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Thorsten Gressling.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>